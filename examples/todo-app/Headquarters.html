<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>VueFire Todo App Demo</title>
  <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="../../dist/vuefire.js"></script>
</head>

<body>

  <div id="app">
    <input v-model.trim="newProductText" @keyup.enter="addProduct" placeholder="Add new product">
    <ul>
      <li v-for="product in Products">
        <input :value="product.name" @input="updateProductText(product, $event.target.value)">
        <button @click="removeProduct(product)">X</button>
      </li>
    </ul>


  </div>

  <script>
    /* global Vue, firebase */

    var config = {
      apiKey: 'AIzaSyA9Ulhm28m7asgKRB_OEWkNWSyT3L9hseY',
      authDomain: 'test-25e2a.firebaseapp.com',
      databaseURL: 'https://test-25e2a.firebaseio.com',
      projectId: 'test-25e2a',
      storageBucket: 'test-25e2a.appspot.com',
      messagingSenderId: '865495557037'
    }

    var db = firebase.initializeApp(config).database()
    var productRef = db.ref('Products')
    var fishesRef = db.ref('Fishes')

    new Vue({
      el: '#app',
      data: {
        newProductText: ''
      },
      firebase: {
        Products: productRef.limitToLast(25),
        Fishes: fishesRef.limitToLast(25)
      },
      methods: {
        addProduct: function () {
          if (this.newProductText) {
            productRef.push({
              name: this.newProductText,
              type: 'Products',
              status: true
            })
            this.newProductText = ''
          }
        },
        updateProductText: function (todo, newText) {
          productRef.child(todo['.key']).child('name').set(newText)
        },
        removeProduct: function (todo) {
          productRef.child(todo['.key']).remove()
        }
      }
    })
  </script>
</body>

</html>
